{"version":3,"sources":["components/awardAlert.js","services/game.js","components/buttonView.js","services/signup.js","components/SignUp.js","services/login.js","components/Login.js","components/welcome.js","App.js","index.js"],"names":["AwardBanner","award","visible","className","clickUrl","process","userUrl","a","async","axios","get","response","data","post","request","id","put","points","body","ButtonView","user","useState","setAward","setVisible","clicks","setClicks","setId","useEffect","gameService","then","amount","addPoints","awardTimer","handleStorage","window","localStorage","setItem","JSON","stringify","reward","setTimeout","onClick","location","reload","url","credentials","SignUp","setPage","username","setUsername","password","setPassword","passwordConfirm","setPasswordConfirm","errorMessage","setErrorMessage","passwordInfo","setPasswordInfo","infoClass","setInfoClass","takenUsers","setTakenUsers","signupService","length","passwordValidation","changedValue","value","onSubmit","event","preventDefault","some","type","placeholder","name","onChange","target","Login","setUser","loginService","Welcome","App","page","loggedUserJSON","getItem","parse","pages","Map","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9a49aa0d.chunk.js","sourcesContent":["import React from 'react'\n\nconst AwardBanner = ({ award, visible }) => {\n\n  if (visible) {\n    return (\n      <div className=\"award\">\n        <p>You received {award} points!</p>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n\n    </div>\n  )\n\n}\n\nexport default AwardBanner","import axios from 'axios'\n\nconst clickUrl = `${process.env.REACT_APP_API_URL}/click`\nconst userUrl = `${process.env.REACT_APP_API_URL}/user`\n\nconst getClicks = async () => {\n  const response = await axios.get(clickUrl)\n  return response.data\n}\n\nconst initClicks = async () => {\n  const request = await axios.post(clickUrl)\n  return request.data\n}\n\nconst addClick = async (id) => {\n  const request = await axios.put(`${clickUrl}/${id}`)\n  return request.data\n}\n\nconst reducePoint = async (id) => {\n  const request = await axios.put(`${userUrl}/${id}`)\n  return request.data\n}\n\nconst addPoints = async (id, points) =>{\n  const body ={\n    points: points\n  }\n  const request = await axios.put(`${userUrl}/${id}/add`, body)\n  return request.data\n}\n\nexport default { getClicks, initClicks, addClick, reducePoint, addPoints }","import React, { useState, useEffect } from 'react'\nimport AwardBanner from './awardAlert'\nimport gameService from '../services/game'\n\nconst ButtonView = ({ user }) => {\n\n  const [award, setAward] = useState('')\n  const [visible, setVisible] = useState(false)\n  const [clicks, setClicks] = useState(null)\n  const [id, setId] = useState(null)\n\n  useEffect(() => {\n    gameService.getClicks().then(response => {\n      setClicks(response[0].amount)\n      setId(response[0].id)\n    })\n  }, [])\n\n  const handleClick = () => {\n    gameService.addClick(id)\n    gameService.reducePoint(user.user.id)\n    setClicks(clicks + 1)\n    addPoints()\n    user.user.points = user.user.points - 1\n    handleStorage()\n  }\n\n  const addPoints = () => {\n    if ((clicks + 1) % 500 === 0) {\n      user.user.points = user.user.points + 250\n      gameService.addPoints(user.user.id, user.user.points - 1)\n      awardTimer(250)\n    } else if ((clicks + 1) % 100 === 0) {\n      user.user.points = user.user.points + 40\n      gameService.addPoints(user.user.id, user.user.points - 1)\n      awardTimer(40)\n    } else if ((clicks + 1) % 10 === 0) {\n      user.user.points = user.user.points + 5\n      gameService.addPoints(user.user.id, user.user.points - 1)\n      awardTimer(5)\n    }\n  }\n\n  const handleStorage = () => {\n    window.localStorage.setItem(\n      'loggedUser', JSON.stringify(user)\n    )\n  }\n\n  const handleNewGame = () => {\n    user.user.points = 20\n    gameService.addPoints(user.user.id, 20)\n    handleStorage()\n    window.location.reload()\n  }\n\n  const prizeCounter = () => {\n    let remainder = null\n    remainder = 10 - clicks % 10\n    return remainder\n  }\n\n  const awardTimer = (reward) => {\n    setAward(reward)\n    setVisible(true)\n    setTimeout(() => {\n      setVisible(false)\n    }, 3000)\n  }\n\n  return (\n    <div className=\"buttonview\">\n      <p>My points: {user.user.points}</p>\n\n      {user.user.points > 0 ?\n        <div>\n          <button onClick={handleClick}>Press for glory!</button>\n\n          <p>Next prize in: {prizeCounter()}</p>\n        </div>\n        :\n        <button onClick={handleNewGame}>Try again?</button>\n      }\n\n      <AwardBanner\n        award={award}\n        setAward={setAward}\n        visible={visible}\n      />\n    </div>\n  )\n}\n\nexport default ButtonView","import axios from 'axios'\n\nconst url = `${process.env.REACT_APP_API_URL}/user`\n\nconst getUsers = async () => {\n  const response = await axios.get(url)\n  return response.data\n}\n\nconst signup = async (credentials) => {\n  const response = await axios.post(url, credentials)\n  return response.data\n}\n\nexport default { signup, getUsers }","import React, { useState, useEffect } from 'react'\nimport signupService from '../services/signup'\nimport gameService from '../services/game'\n\nconst SignUp = ({ setPage }) => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [passwordConfirm, setPasswordConfirm] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [passwordInfo, setPasswordInfo] = useState('')\n  const [infoClass, setInfoClass] = useState('')\n  const [takenUsers, setTakenUsers] = useState([])\n\n  useEffect(() => {\n    signupService.getUsers().then(response => {\n      setTakenUsers(response)\n    })\n    if (takenUsers.length === 0) {\n      gameService.initClicks()\n    }\n  }, [])\n\n  const handleSignUp = async (event) => {\n    event.preventDefault()\n    if (takenUsers.some(user => (user.username === username))) {\n      setErrorMessage('Username is already taken')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      return\n    }\n    try {\n      if (password === passwordConfirm) {\n        await signupService.signup({\n          username, password\n        })\n      }\n      setUsername('')\n      setPassword('')\n      setPasswordConfirm('')\n      setPage('login')\n    } catch (exception) {\n      setErrorMessage('Something went wrong')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const passwordValidation = (changedValue, value) => {\n    if (value === changedValue) {\n      setPasswordInfo('Passwords match')\n      setInfoClass('success')\n    } else {\n      setPasswordInfo('Passwords do not match')\n      setInfoClass('error')\n    }\n  }\n\n  return (\n    <div>\n      <h2>Register here</h2>\n      <p className=\"error\">{errorMessage}</p>\n      <div>\n        <form onSubmit={handleSignUp}>\n          <div>\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              name=\"Username\"\n              value={username}\n              onChange={({ target }) => setUsername(target.value)}\n            />\n          </div>\n          <div>\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              name=\"Password\"\n              value={password}\n              onChange={({ target }) => {\n                setPassword(target.value)\n                passwordValidation(target.value, passwordConfirm)\n              }}\n            />\n          </div>\n          <div>\n            <input\n              type=\"password\"\n              placeholder=\"Password again\"\n              name=\"PasswordConfirmation\"\n              value={passwordConfirm}\n              onChange={({ target }) => {\n                setPasswordConfirm(target.value)\n                passwordValidation(target.value, password)\n              }}\n            />\n          </div>\n          <div className={infoClass}>\n            {passwordInfo}\n          </div>\n          <button type=\"submit\">Sign up</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default SignUp","import axios from 'axios'\nconst url = `${process.env.REACT_APP_API_URL}/login`\n\nconst login = async (credentials) => {\n  const response = await axios.post(url, credentials)\n  return response.data\n}\n\nexport default { login }","import React, { useState } from 'react'\nimport loginService from '../services/login'\n\nconst Login = ({ setUser, setPage }) => {\n\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n      window.localStorage.setItem(\n        'loggedUser', JSON.stringify(user)\n      )\n      setUser(user)\n      setUsername('')\n      setPassword('')\n      setPage('play')\n    } catch (exception) {\n      setErrorMessage('Invalid username or password')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  return (\n    <div>\n      <h2>Log in</h2>\n      <p className=\"error\">{errorMessage}</p>\n      <form onSubmit={handleLogin}>\n        <div>\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            value={username}\n            name=\"Username\"\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div>\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            value={password}\n            name=\"Password\"\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button type=\"submit\">Log in</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Login ","import React from 'react'\n\nconst Welcome = () => {\n  return (\n    <div>\n      <h2>Welcome to Buttongame!</h2>\n      <h3>If you want to participate, please register and log in!</h3>\n    </div>\n  )\n}\n\nexport default Welcome","import React, { useState, useEffect } from 'react'\nimport Buttonview from './components/buttonView'\nimport SignUp from './components/SignUp'\nimport Login from './components/Login'\nimport Welcome from './components/welcome'\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [page, setPage] = useState('welcome')\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      setPage('play')\n    }\n  }, [])\n\n  const pages = new Map([\n    ['register', <SignUp setPage={setPage} />],\n    ['login', <Login setUser={setUser} setPage={setPage} />],\n    ['play', <Buttonview user={user}/>],\n    ['welcome', <Welcome />]\n  ])\n\n  const showPage = () => {\n    let visible = pages.get(page)\n    return (\n      visible\n    )\n  }\n\n  const logout = () => {\n    window.localStorage.removeItem('loggedUser')\n    setUser(null)\n    setPage('welcome')\n  }\n\n  return (\n    <div className=\"App\">\n      <div>\n        {user === null ?\n          <div>\n            <header>\n              <button onClick={() => setPage('login')}>Log in</button>\n              <button onClick={() => setPage('register')}>Register</button>\n            </header>\n          </div>\n          :\n          <header>\n            <p className=\"username-header\">Logged in as\n            <br/>\n             {user.user.username}</p>\n            <button onClick={() => logout()}>Log out</button>\n          </header>\n        }\n      </div>\n      {showPage()}\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}