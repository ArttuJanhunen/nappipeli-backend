(this.webpackJsonpnappipeli=this.webpackJsonpnappipeli||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(14),c=n.n(u),s=n(2),l=function(e){var t=e.award;return e.visible?r.a.createElement("div",{className:"award"},r.a.createElement("p",null,"You received ",t," points!")):r.a.createElement("div",null)},o=n(1),i=n.n(o),p=n(4),m=n.n(p),d="".concat("/api","/click"),f="".concat("/api","/user"),v=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(m.a.get(d));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},b=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(m.a.post(d));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},g=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.put("".concat(d,"/").concat(e)));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},w=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.put("".concat(f,"/").concat(e)));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},E=function(e,t){var n,a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n={points:t},r.next=3,i.a.awrap(m.a.put("".concat(f,"/").concat(e,"/add"),n));case 3:return a=r.sent,r.abrupt("return",a.data);case 5:case"end":return r.stop()}}))},h=function(e){var t=e.user,n=Object(a.useState)(null),u=Object(s.a)(n,2),c=u[0],o=u[1],i=Object(a.useState)(!1),p=Object(s.a)(i,2),m=p[0],d=p[1],f=Object(a.useState)(null),b=Object(s.a)(f,2),h=b[0],O=b[1],j=Object(a.useState)(null),S=Object(s.a)(j,2),x=S[0],y=S[1];Object(a.useEffect)((function(){v().then((function(e){O(e[0].amount),y(e[0].id)}))}),[]);var k=function(){(h+1)%500===0?(t.user.points=t.user.points+250,E(t.user.id,t.user.points),U(250)):(h+1)%100===0?(t.user.points=t.user.points+40,E(t.user.id,t.user.points),U(40)):(h+1)%10===0&&(t.user.points=t.user.points+5,E(t.user.id,t.user.points),U(5))},P=function(){window.localStorage.setItem("loggedUser",JSON.stringify(t))},U=function(e){o(e),d(!0),setTimeout((function(){d(!1)}),3e3)};return r.a.createElement("div",{className:"buttonview"},r.a.createElement("p",null,"My points: ",t.user.points),t.user.points>0?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){g(x),w(t.user.id),O(h+1),k(),t.user.points=t.user.points-1,P()}},"Press for glory!"),r.a.createElement("p",null,"Next prize in: ",10-h%10)):r.a.createElement("button",{onClick:function(){t.user.points=20,E(t.user.id,20),P(),window.location.reload()}},"Try again?"),r.a.createElement(l,{award:c,setAward:o,visible:m}))},O="".concat("/api","/user"),j=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.post(O,e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},S=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(m.a.get(O));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},x=function(e){var t=e.setPage,n=e.takenUsers,u=Object(a.useState)(""),c=Object(s.a)(u,2),l=c[0],o=c[1],p=Object(a.useState)(""),m=Object(s.a)(p,2),d=m[0],f=m[1],v=Object(a.useState)(null),b=Object(s.a)(v,2),g=b[0],w=b[1],E=Object(a.useState)(null),h=Object(s.a)(E,2),O=h[0],S=h[1],x=Object(a.useState)(null),y=Object(s.a)(x,2),k=y[0],P=y[1],U=Object(a.useState)(null),N=Object(s.a)(U,2),C=N[0],I=N[1],T=Object(a.useState)(null),J=Object(s.a)(T,2),L=J[0],A=J[1],B=Object(a.useState)(null),D=Object(s.a)(B,2),M=D[0],R=D[1],z=function(e,t){t===e?(P("Passwords match"),I("success")):(P("Passwords do not match"),I("error"))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Register here"),r.a.createElement("p",{className:"error"},O),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),n.some((function(e){return e.username===l}))&&(S("Username is already taken"),setTimeout((function(){S(null)}),5e3)),l.length<3&&(A("Username too short, minimum length 3"),setTimeout((function(){A()}),5e3)),d.length<3&&(R("Password too short, minimum length 3"),setTimeout((function(){R(null)}),5e3)),!(n.some((function(e){return e.username===l}))||l.length<3||d.length<3)){a.next=6;break}return a.abrupt("return");case 6:if(a.prev=6,d!==g){a.next=10;break}return a.next=10,i.a.awrap(j({username:l,password:d}));case 10:o(""),f(""),w(null),t("login"),a.next=20;break;case 16:a.prev=16,a.t0=a.catch(6),S("Something went wrong"),setTimeout((function(){S(null)}),5e3);case 20:case"end":return a.stop()}}),null,null,[[6,16]])}},r.a.createElement("div",null,r.a.createElement("p",{className:"error"},L),r.a.createElement("input",{type:"text",placeholder:"Username",name:"Username",value:l,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("div",null,null!==M&&r.a.createElement("p",{className:"error"},M),r.a.createElement("input",{type:"password",placeholder:"Password",name:"Password",value:d,onChange:function(e){var t=e.target;f(t.value),z(t.value,g)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"Password again",name:"PasswordConfirmation",value:g,onChange:function(e){var t=e.target;w(t.value),z(t.value,d)}})),r.a.createElement("div",{className:C},k),r.a.createElement("button",{type:"submit"},"Sign up"))))},y="".concat("/api","/login"),k=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.post(y,e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},P=function(e){var t=e.setUser,n=e.setPage,u=Object(a.useState)(null),c=Object(s.a)(u,2),l=c[0],o=c[1],p=Object(a.useState)(null),m=Object(s.a)(p,2),d=m[0],f=m[1],v=Object(a.useState)(null),b=Object(s.a)(v,2),g=b[0],w=b[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Log in"),r.a.createElement("p",{className:"error"},l),r.a.createElement("form",{onSubmit:function(e){var a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,i.a.awrap(k({username:d,password:g}));case 4:a=r.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),t(a),f(null),w(null),n("play"),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),o("Invalid username or password"),setTimeout((function(){o(null)}),5e3);case 16:case"end":return r.stop()}}),null,null,[[1,12]])}},r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Username",value:d,name:"Username",onChange:function(e){var t=e.target;return f(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"Password",value:g,name:"Password",onChange:function(e){var t=e.target;return w(t.value)}})),r.a.createElement("button",{type:"submit"},"Log in")))},U=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome to Buttongame!"),r.a.createElement("h3",null,"If you want to participate, please register and log in!"))},N=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)("welcome"),l=Object(s.a)(c,2),o=l[0],i=l[1],p=Object(a.useState)([]),m=Object(s.a)(p,2),d=m[0],f=m[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);u(t),i("play")}}),[]),Object(a.useEffect)((function(){S().then((function(e){f(e)})),0===d.length&&b()}),[]);var v=new Map([["register",r.a.createElement(x,{setPage:i,takenUsers:d})],["login",r.a.createElement(P,{setUser:u,setPage:i})],["play",r.a.createElement(h,{user:n})],["welcome",r.a.createElement(U,null)]]);return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,null===n?r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("button",{onClick:function(){return i("login")}},"Log in"),r.a.createElement("button",{onClick:function(){return i("register")}},"Register"))):r.a.createElement("header",null,r.a.createElement("p",{className:"username-header"},"Logged in as",r.a.createElement("br",null),n.user.username),r.a.createElement("button",{onClick:function(){return window.localStorage.removeItem("loggedUser"),u(null),void i("welcome")}},"Log out"))),v.get(o))};n(38);c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.12a3e0fa.chunk.js.map