(this.webpackJsonpnappipeli=this.webpackJsonpnappipeli||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),u=n.n(c),s=n(2),o=function(e){var t=e.award;return e.visible?r.a.createElement("div",{className:"award"},r.a.createElement("p",null,"You received ",t," points!")):r.a.createElement("div",null)},l=n(1),i=n.n(l),p=n(4),m=n.n(p),d="".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/click"),f="".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/user"),v=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(m.a.get(d));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},b=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(m.a.post(d));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},E=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.put("".concat(d,"/").concat(e)));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},w=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.put("".concat(f,"/").concat(e)));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},g=function(e,t){var n,a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n={points:t},r.next=3,i.a.awrap(m.a.put("".concat(f,"/").concat(e,"/add"),n));case 3:return a=r.sent,r.abrupt("return",a.data);case 5:case"end":return r.stop()}}))},O=function(e){var t=e.user,n=Object(a.useState)(""),c=Object(s.a)(n,2),u=c[0],l=c[1],i=Object(a.useState)(!1),p=Object(s.a)(i,2),m=p[0],d=p[1],f=Object(a.useState)(null),b=Object(s.a)(f,2),O=b[0],h=b[1],j=Object(a.useState)(null),P=Object(s.a)(j,2),x=P[0],y=P[1];Object(a.useEffect)((function(){v().then((function(e){h(e[0].amount),y(e[0].id)}))}),[]);var S=function(){O%500===0?(t.user.points=t.user.points+250,g(t.user.id,t.user.points-1),C(250)):O%100===0?(t.user.points=t.user.points+40,g(t.user.id,t.user.points-1),C(40)):O%10===0&&(t.user.points=t.user.points+5,g(t.user.id,t.user.points-1),C(5))},U=function(){window.localStorage.setItem("loggedUser",JSON.stringify(t))},C=function(e){l(e),d(!0),setTimeout((function(){d(!1)}),3e3)};return r.a.createElement("div",{className:"buttonview"},r.a.createElement("p",null,"My points: ",t.user.points),t.user.points>0?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){E(x),w(t.user.id),h(O+1),S(),t.user.points=t.user.points-1,U()}},"Press for glory!"),r.a.createElement("p",null,"Clicks: ",O),r.a.createElement("p",null,"Next prize in: ",10-O%10)):r.a.createElement("button",{onClick:function(){t.user.points=20,g(t.user.id,20),U(),window.location.reload()}},"Try again?"),r.a.createElement(o,{award:u,setAward:l,visible:m}))},h="".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/user"),j=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.post(h,e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},P=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(m.a.get(h));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},x=function(e){var t=e.setPage,n=Object(a.useState)(""),c=Object(s.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)(""),p=Object(s.a)(l,2),m=p[0],d=p[1],f=Object(a.useState)(""),v=Object(s.a)(f,2),E=v[0],w=v[1],g=Object(a.useState)(null),O=Object(s.a)(g,2),h=O[0],x=O[1],y=Object(a.useState)(""),S=Object(s.a)(y,2),U=S[0],C=S[1],_=Object(a.useState)(""),N=Object(s.a)(_,2),L=N[0],I=N[1],k=Object(a.useState)([]),A=Object(s.a)(k,2),R=A[0],T=A[1];Object(a.useEffect)((function(){P().then((function(e){T(e)})),0===R.length&&b()}),[]);var B=function(e,t){t===e?(C("Passwords match"),I("success")):(C("Passwords do not match"),I("error"))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Register here"),r.a.createElement("p",{className:"error"},h),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),!R.some((function(e){return e.username===u}))){n.next=5;break}return x("Username is already taken"),setTimeout((function(){x(null)}),5e3),n.abrupt("return");case 5:if(n.prev=5,m!==E){n.next=9;break}return n.next=9,i.a.awrap(j({username:u,password:m}));case 9:o(""),d(""),w(""),t("login"),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(5),x("Something went wrong"),setTimeout((function(){x(null)}),5e3);case 19:case"end":return n.stop()}}),null,null,[[5,15]])}},r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Username",name:"Username",value:u,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"Password",name:"Password",value:m,onChange:function(e){var t=e.target;d(t.value),B(t.value,E)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"Password again",name:"PasswordConfirmation",value:E,onChange:function(e){var t=e.target;w(t.value),B(t.value,m)}})),r.a.createElement("div",{className:L},U),r.a.createElement("button",{type:"submit"},"Sign up"))))},y="".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/login"),S=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.post(y,e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},U=function(e){var t=e.setUser,n=e.setPage,c=Object(a.useState)(null),u=Object(s.a)(c,2),o=u[0],l=u[1],p=Object(a.useState)(""),m=Object(s.a)(p,2),d=m[0],f=m[1],v=Object(a.useState)(""),b=Object(s.a)(v,2),E=b[0],w=b[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Log in"),r.a.createElement("p",{className:"error"},o),r.a.createElement("form",{onSubmit:function(e){var a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,i.a.awrap(S({username:d,password:E}));case 4:a=r.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),t(a),f(""),w(""),n("play"),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),l("Invalid username or password"),setTimeout((function(){l(null)}),5e3);case 16:case"end":return r.stop()}}),null,null,[[1,12]])}},r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Username",value:d,name:"Username",onChange:function(e){var t=e.target;return f(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"Password",value:E,name:"Password",onChange:function(e){var t=e.target;return w(t.value)}})),r.a.createElement("button",{type:"submit"},"Log in")))},C=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome to Buttongame!"),r.a.createElement("h3",null,"If you want to participate, please register and log in!"))},_=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)("welcome"),o=Object(s.a)(u,2),l=o[0],i=o[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);c(t),i("play")}}),[]);var p=new Map([["register",r.a.createElement(x,{setPage:i})],["login",r.a.createElement(U,{setUser:c,setPage:i})],["play",r.a.createElement(O,{user:n})],["welcome",r.a.createElement(C,null)]]);return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,null===n?r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("button",{onClick:function(){return i("login")}},"Log in"),r.a.createElement("button",{onClick:function(){return i("register")}},"Register"))):r.a.createElement("header",null,r.a.createElement("p",{className:"username-header"},"Logged in as",r.a.createElement("br",null),n.user.username),r.a.createElement("button",{onClick:function(){return window.localStorage.removeItem("loggedUser"),c(null),void i("welcome")}},"Log out"))),p.get(l))};n(38);u.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.50d89799.chunk.js.map